<!DOCTYPE html>
<html lang="vi">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Si√™u Nh√¢n √în Thi L·ªõp 1.2</title>
    <style>
        :root { --primary: #4caf50; --secondary: #2196f3; --wrong: #f44336; --bg: #fdfdfd; }
        body { font-family: 'Segoe UI', Tahoma, sans-serif; background: #eef2f3; display: flex; justify-content: center; align-items: center; min-height: 100vh; margin: 0; padding: 10px; }
        #quiz-container { background: white; padding: 25px; border-radius: 30px; box-shadow: 0 15px 35px rgba(0,0,0,0.2); width: 100%; max-width: 650px; text-align: center; border: 6px solid var(--primary); min-height: 580px; position: relative; }
        .home-icon { position: absolute; top: 20px; left: 20px; font-size: 24px; cursor: pointer; background: #fff; border-radius: 50%; width: 45px; height: 45px; display: flex; align-items: center; justify-content: center; border: 3px solid var(--primary); z-index: 10; }
        .menu-btn { width: 100%; padding: 20px; margin: 12px 0; font-size: 18px; font-weight: bold; border-radius: 18px; border: none; cursor: pointer; color: white; box-shadow: 0 4px 0 rgba(0,0,0,0.2); transition: 0.3s; }
        .btn-toan { background: #ff9800; }
        .btn-chinh-ta { background: #9c27b0; }
        .btn-doc-hieu { background: #00bcd4; }
        .progress { font-size: 16px; font-weight: bold; background: #fff9c4; padding: 8px; border-radius: 20px; width: fit-content; margin: 10px auto; }
        #question { font-size: 22px; font-weight: bold; margin-bottom: 20px; color: #333; min-height: 60px; }
        .options { display: grid; grid-template-columns: 1fr 1fr; gap: 15px; }
        button.option-btn { padding: 18px; font-size: 18px; border: 3px solid #eee; border-radius: 15px; background: #fff; cursor: pointer; font-weight: bold; transition: 0.2s; }
        
        button.correct { background-color: var(--primary) !important; color: white !important; border-color: #2e7d32 !important; }
        button.wrong { background-color: var(--wrong) !important; color: white !important; border-color: #b71c1c !important; }
        
        .nav-controls { display: flex; justify-content: space-between; margin-top: 30px; gap: 15px; }
        .nav-btn { flex: 1; padding: 15px; border-radius: 12px; border: none; background: #90a4ae; color: white; font-weight: bold; cursor: pointer; font-size: 16px; }
        .nav-btn:disabled { opacity: 0.3; cursor: not-allowed; }
        .nav-btn.active { background: var(--secondary); }

        .reading-text { background: #fffde7; padding: 20px; border-left: 8px solid #fbc02d; text-align: left; margin-bottom: 20px; font-size: 20px; line-height: 1.6; border-radius: 10px; }
    </style>
</head>
<body>

<div id="quiz-container">
    <div id="home-button" class="home-icon" style="display: none;" onclick="goHome()">üè†</div>

    <div id="menu-screen">
        <h2 style="color: #2e7d32;">üåü √îN THI H·ªåC K·ª≤ 1 - L·ªöP 1.2 üåü</h2>
        <button class="menu-btn btn-toan" onclick="startQuiz(1)">PH·∫¶N 1: TO√ÅN (35 c√¢u)</button>
        <button class="menu-btn btn-chinh-ta" onclick="startQuiz(2)">PH·∫¶N 2: CH√çNH T·∫¢ (50 c√¢u)</button>
        <button class="menu-btn btn-doc-hieu" onclick="startQuiz(3)">PH·∫¶N 3: ƒê·ªåC HI·ªÇU & V·∫¶N (60 c√¢u)</button>
    </div>

    <div id="quiz-content" style="display:none;">
        <div class="progress" id="progress"></div>
        <div id="reading-container" class="reading-text" style="display:none;"></div>
        <div id="question"></div>
        <div class="options" id="options"></div>
        <div id="result-message" style="margin-top:15px; font-size: 18px; font-weight:bold; height: 25px;"></div>
        
        <div class="nav-controls">
            <button class="nav-btn" id="prev-btn" onclick="prevQuestion()">‚¨Ö Quay l·∫°i</button>
            <button class="nav-btn active" id="next-btn" onclick="nextQuestion()">Ti·∫øp theo ‚û°</button>
        </div>
    </div>

    <div id="score-board" style="display:none;">
        <h2 style="margin-top: 40px;">üéä K·∫æT QU·∫¢ C·ª¶A B√â üéä</h2>
        <div style="font-size: 70px; color: #ff9800; font-weight: bold;" id="final-score">0/0</div>
        <p id="feedback-text" style="font-size: 22px; font-weight: bold;"></p>
        <button class="menu-btn" style="background:var(--primary); width: 80%; margin: 20px auto;" onclick="goHome()">L√†m m√¥n kh√°c</button>
    </div>
</div>

<script>
// D·ªØ li·ªáu c√¢u h·ªèi (Gi·ªØ nguy√™n c·∫•u tr√∫c nh∆∞ng code x·ª≠ l√Ω s·∫Ω random ƒë√°p √°n)
const part1 = [ { q: "4 + 5 = ?", a: ["8", "9"], correct: 1 }, { q: "10 - 3 = ?", a: ["7", "6"], correct: 0 }, { q: "8 + 2 = ?", a: ["9", "10"], correct: 1 }, { q: "7 - 0 = ?", a: ["7", "0"], correct: 0 }, { q: "S·ªë l·ªõn nh·∫•t: 4, 9, 2?", a: ["9", "4"], correct: 0 }, { q: "S·ªë b√© nh·∫•t: 5, 1, 8?", a: ["5", "1"], correct: 1 }, { q: "G·ªôp 3 v√† 5 ƒë∆∞·ª£c m·∫•y?", a: ["8", "7"], correct: 0 }, { q: "T√°ch 10 g·ªìm 6 v√† m·∫•y?", a: ["4", "3"], correct: 0 }, { q: "5 + 2 ... 8", a: ["<", ">"], correct: 0 }, { q: "H√¨nh tr√≤n lƒÉn ƒë∆∞·ª£c kh√¥ng?", a: ["C√≥", "Kh√¥ng"], correct: 0 }, { q: "Qu·∫£ b√≥ng kh·ªëi g√¨?", a: ["Kh·ªëi c·∫ßu", "Kh·ªëi vu√¥ng"], correct: 0 }, { q: "H·ªôp qu√† vu√¥ng kh·ªëi g√¨?", a: ["L·∫≠p ph∆∞∆°ng", "Ch·ªØ nh·∫≠t"], correct: 0 }, { q: "9 ... 4 + 5", a: ["=", ">"], correct: 0 }, { q: "S·ªë ·ªü gi·ªØa 7 v√† 9?", a: ["8", "6"], correct: 0 }, { q: "Tr∆∞·ªõc s·ªë 1 l√† s·ªë m·∫•y?", a: ["0", "2"], correct: 0 }, { q: "7 + 1 + 2 = ?", a: ["10", "9"], correct: 0 }, { q: "10 - 5 - 2 = ?", a: ["3", "4"], correct: 0 }, { q: "S·ªë l·ªõn h∆°n 8?", a: ["9", "7"], correct: 0 }, { q: "Tay tr√°i c·∫ßm g√¨?", a: ["B√°t c∆°m", "ƒê≈©a"], correct: 0 }, { q: "Tam gi√°c c√≥ m·∫•y c·∫°nh?", a: ["3", "4"], correct: 0 }, { q: "G·ªôp 4 v√† 4 ƒë∆∞·ª£c m·∫•y?", a: ["8", "9"], correct: 0 }, { q: "10 - ... = 5", a: ["5", "4"], correct: 0 }, { q: "3 + ... = 9", a: ["6", "5"], correct: 0 }, { q: "S·ªë li·ªÅn sau s·ªë 9?", a: ["10", "8"], correct: 0 }, { q: "S·ªë li·ªÅn tr∆∞·ªõc s·ªë 10?", a: ["9", "8"], correct: 0 }, { q: "T√°ch 8 g·ªìm 4 v√† m·∫•y?", a: ["4", "5"], correct: 0 }, { q: "6 + 0 + 4 = ?", a: ["10", "9"], correct: 0 }, { q: "H√¨nh vu√¥ng c√≥ m·∫•y c·∫°nh?", a: ["4", "3"], correct: 0 }, { q: "Quy·ªÉn v·ªü h√¨nh g√¨?", a: ["Ch·ªØ nh·∫≠t", "Tr√≤n"], correct: 0 }, { q: "Phao b∆°i h√¨nh g√¨?", a: ["Tr√≤n", "Vu√¥ng"], correct: 0 }, { q: "10 - 8 = ?", a: ["2", "1"], correct: 0 }, { q: "5 + 4 = ?", a: ["9", "8"], correct: 0 }, { q: "S·ªë b√© h∆°n 2?", a: ["1", "3"], correct: 0 }, { q: "4 + ... = 7", a: ["3", "2"], correct: 0 }, { q: "9 - ... = 6", a: ["3", "4"], correct: 0 } ];
const part2 = [ { q: "ƒêi·ªÅn: '...on ki·∫øn'", a: ["k", "c"], correct: 1 }, { q: "ƒêi·ªÅn: '...√°i ca'", a: ["c", "k"], correct: 0 }, { q: "ƒêi·ªÅn: '...·ªÉ chuy·ªán'", a: ["k", "c"], correct: 0 }, { q: "ƒêi·ªÅn: '...√¨ l·∫°'", a: ["k", "c"], correct: 0 }, { q: "ƒêi·ªÅn: '...√¢u c√°'", a: ["c", "k"], correct: 0 }, { q: "ƒêi·ªÅn: '...·∫ª v·ªü'", a: ["k", "c"], correct: 0 }, { q: "ƒêi·ªÅn: '...im ti√™m'", a: ["k", "c"], correct: 0 }, { q: "ƒêi·ªÅn: '...√¨ c·ªç'", a: ["k", "c"], correct: 0 }, { q: "ƒêi·ªÅn: '...i√™n nh·∫´n'", a: ["k", "c"], correct: 0 }, { q: "ƒêi·ªÅn: '...·ªï √°o'", a: ["c", "k"], correct: 0 }, { q: "ƒêi·ªÅn: '...√¨ di·ªáu'", a: ["k", "c"], correct: 0 }, { q: "ƒêi·ªÅn: '...on c√°'", a: ["c", "k"], correct: 0 }, { q: "ƒêi·ªÅn: '...·∫ª b·∫£ng'", a: ["k", "c"], correct: 0 }, { q: "ƒêi·ªÅn: 'nh√† ...a'", a: ["g", "gh"], correct: 0 }, { q: "ƒêi·ªÅn: 'g·ªì ...·ªÅ'", a: ["gh", "g"], correct: 0 }, { q: "ƒêi·ªÅn: '...i nh·ªõ'", a: ["gh", "g"], correct: 0 }, { q: "ƒêi·ªÅn: 'con ...√†'", a: ["g", "gh"], correct: 0 }, { q: "ƒêi·ªÅn: 'c√°i ...·∫ø'", a: ["gh", "g"], correct: 0 }, { q: "ƒêi·ªÅn: '...i ch√©p'", a: ["gh", "g"], correct: 0 }, { q: "ƒêi·ªÅn: '...√© tai'", a: ["gh", "g"], correct: 0 }, { q: "ƒêi·ªÅn: '...·∫ø g·ªó'", a: ["gh", "g"], correct: 0 }, { q: "ƒêi·ªÅn: '...√† g√°y'", a: ["g", "gh"], correct: 0 }, { q: "ƒêi·ªÅn: '...·ªó b√†n'", a: ["g", "gh"], correct: 0 }, { q: "ƒêi·ªÅn: '...·ªì gh·ªÅ'", a: ["g", "gh"], correct: 0 }, { q: "ƒêi·ªÅn: '...√™ s·ª£'", a: ["gh", "g"], correct: 0 }, { q: "ƒêi·ªÅn: '...√† ch·ªçi'", a: ["g", "gh"], correct: 0 }, { q: "ƒêi·ªÅn: 'con ...√©'", a: ["ngh", "ng"], correct: 0 }, { q: "ƒêi·ªÅn: 'b·∫Øp ...√¥'", a: ["ng", "ngh"], correct: 0 }, { q: "ƒêi·ªÅn: 'suy ...ƒ©'", a: ["ngh", "ng"], correct: 0 }, { q: "ƒêi·ªÅn: 'c·ªß ...·ªá'", a: ["ngh", "ng"], correct: 0 }, { q: "ƒêi·ªÅn: '...·ªâ h√®'", a: ["ngh", "ng"], correct: 0 }, { q: "ƒêi·ªÅn: '...e nh·∫°c'", a: ["ngh", "ng"], correct: 0 }, { q: "ƒêi·ªÅn: 'ng·ªçt ...√†o'", a: ["ng", "ngh"], correct: 0 }, { q: "ƒêi·ªÅn: '...√© ch∆°i'", a: ["ngh", "ng"], correct: 0 }, { q: "ƒêi·ªÅn: '...·ªß ngon'", a: ["ng", "ngh"], correct: 0 }, { q: "ƒêi·ªÅn: '...√≥ng tr√¥ng'", a: ["ng", "ngh"], correct: 0 }, { q: "ƒêi·ªÅn: 'ngh·ªâ ...∆°i'", a: ["ng", "ngh"], correct: 1 }, { q: "ƒêi·ªÅn: '...i ch√©p'", a: ["gh", "g"], correct: 0 }, { q: "ƒêi·ªÅn: '...ia ƒë√¨nh'", a: ["g", "gh"], correct: 0 }, { q: "ƒêi·ªÅn: '...√© ch∆°i'", a: ["gh", "g"], correct: 0 }, { q: "Vi·∫øt ƒê√öNG:", a: ["ngh·ªâ h√®", "ng·ªâ h√®"], correct: 0 }, { q: "Vi·∫øt ƒê√öNG:", a: ["c√°i gh·∫ø", "c√°i g·∫ø"], correct: 0 }, { q: "Vi·∫øt ƒê√öNG:", a: ["con ngh√©", "con ng√©"], correct: 0 }, { q: "Vi·∫øt ƒê√öNG:", a: ["ngh·ªâ ng∆°i", "ng·ªâ ng∆°i"], correct: 0 }, { q: "Vi·∫øt ƒê√öNG:", a: ["k·∫ª v·ªü", "c·∫ª v·ªü"], correct: 0 }, { q: "Vi·∫øt ƒê√öNG:", a: ["g·ªì gh·ªÅ", "gh·ªì gh·ªÅ"], correct: 0 }, { q: "Vi·∫øt ƒê√öNG:", a: ["c·ªß ngh·ªá", "c·ªß ng·ªá"], correct: 0 }, { q: "Vi·∫øt ƒê√öNG:", a: ["gh·∫ø ƒë√°", "g·∫ø ƒë√°"], correct: 0 }, { q: "Vi·∫øt SAI:", a: ["ngh·ªâ h√®", "ng·ªâ h√®"], correct: 1 }, { q: "Vi·∫øt SAI:", a: ["k·∫ª v·ªü", "c·∫ª v·ªü"], correct: 1 } ];
const part3 = [ { text: "Nh√† b√© c√≥ con ngh√©. N√≥ r·∫•t ng∆° ng√°c nh√¨n c·ªè xanh.", q: "Con ngh√© ƒëang nh√¨n c√°i g√¨?", a: ["Nh√¨n b√©", "Nh√¨n c·ªè"], correct: 1 }, { text: "M√πa h√®, c·∫£ nh√† ƒëi bi·ªÉn ch∆°i. Bi·ªÉn c√≥ c√°t tr·∫Øng.", q: "Bi·ªÉn c√≥ c√°i g√¨?", a: ["C√°t tr·∫Øng", "C√°t ƒëen"], correct: 0 }, { text: "B√† ƒëan m≈© len m√†u ƒë·ªè cho b√© ƒë·ªôi ƒëi h·ªçc cho ·∫•m.", q: "Chi·∫øc m≈© len m√†u g√¨?", a: ["M√†u ƒë·ªè", "M√†u xanh"], correct: 0 }, { text: "B√© gi√∫p m·∫π qu√©t nh√† v√† t∆∞·ªõi c√¢y. M·∫π khen b√© chƒÉm.", q: "M·∫π khen b√© th·∫ø n√†o?", a: ["ChƒÉm ngoan", "H·ªçc gi·ªèi"], correct: 0 }, { text: "S√°ng s·ªõm, g√† tr·ªëng g√°y vang g·ªçi b√© d·∫≠y ƒëi h·ªçc.", q: "Con g√¨ g√°y b√°o th·ª©c?", a: ["G√† tr·ªëng", "Con v·ªãt"], correct: 0 }, { text: "B√© H√† gi√£ ngh·ªá gi√∫p b√†. C·ªß ngh·ªá c√≥ m√†u v√†ng t∆∞∆°i.", q: "B√© H√† l√†m g√¨ gi√∫p b√†?", a: ["Gi√£ ngh·ªá", "Qu√©t nh√†"], correct: 0 }, { text: "B√© ƒëi b·ªô ·ªü b·ªù h·ªì. H·ªì c√≥ c√°, c√≥ c·∫£ thi√™n nga.", q: "·ªû h·ªì c√≥ con g√¨ b∆°i?", a: ["Thi√™n nga", "Con th·ªè"], correct: 0 }, { text: "Tr·ªùi m∆∞a, b√© ƒëi √¥ v√† ƒëi ·ªßng ƒë·ªÉ kh√¥ng ∆∞·ªõt ch√¢n.", q: "B√© ƒëi g√¨ ƒë·ªÉ ch√¢n kh√¥?", a: ["ƒêi ·ªßng", "ƒêi d√©p"], correct: 0 }, { text: "B√© th√≠ch ƒÉn nho v√† d∆∞a h·∫•u. Nho ng·ªçt l·ªãm.", q: "Qu·∫£ nho c√≥ v·ªã g√¨?", a: ["V·ªã ng·ªçt", "V·ªã chua"], correct: 0 }, { text: "M·∫π mua cho b√© c√°i c·∫∑p m·ªõi c√≥ h√¨nh ch√∫ th·ªè h·ªìng.", q: "C√°i c·∫∑p h√¨nh con g√¨?", a: ["Ch√∫ th·ªè", "Ch√∫ g·∫•u"], correct: 0 }, { text: "B·ªë ƒë∆∞a b√© ƒëi ph·ªë. Ph·ªë x√° t·∫•p n·∫≠p xe c·ªô.", q: "B·ªë ƒë∆∞a b√© ƒëi ƒë√¢u?", a: ["ƒêi ph·ªë", "ƒêi v∆∞·ªùn"], correct: 0 }, { text: "B√© y√™u b√† v√¨ b√† hay k·ªÉ chuy·ªán c·ªï t√≠ch cho b√© nghe.", q: "B√† hay l√†m g√¨?", a: ["K·ªÉ chuy·ªán", "Cho qu√†"], correct: 0 }, { text: "Cu·ªëi tu·∫ßn, b√© ƒë∆∞·ª£c ƒëi c√¥ng vi√™n ng·∫Øm hoa.", q: "B√© ƒëi ƒë√¢u cu·ªëi tu·∫ßn?", a: ["C√¥ng vi√™n", "ƒêi h·ªçc"], correct: 0 }, { text: "H·ªçc k·ª≥ 1 s·∫Øp k·∫øt th√∫c, b√© h·ª©a s·∫Ω h·ªçc th·∫≠t t·ªët.", q: "B√© h·ª©a ƒëi·ªÅu g√¨?", a: ["H·ªçc th·∫≠t t·ªët", "ƒêi ch∆°i"], correct: 0 }, { q: "T·ª´ n√†o c√≥ v·∫ßn 'ia'?", a: ["l√° m√≠a", "m√πa h·∫°"], correct: 0 }, { q: "T·ª´ n√†o c√≥ v·∫ßn 'ua'?", a: ["con cua", "c√°i c·ª≠a"], correct: 0 }, { q: "T·ª´ n√†o c√≥ v·∫ßn '∆∞a'?", a: ["ng·ª±a g·ªó", "m√∫a ca"], correct: 0 }, { q: "T·ª´ n√†o c√≥ v·∫ßn 'ay'?", a: ["m√°y bay", "m√°i nh√†"], correct: 0 }, { q: "ƒêi·ªÅn v·∫ßn: 'con l...n'", a: ["∆∞∆°n", "u√¥n"], correct: 0 }, { q: "ƒêi·ªÅn v·∫ßn: 'cu·ªôn d...'", a: ["√¢y", "ay"], correct: 0 }, { q: "Ti·∫øng n√†o c√≥ v·∫ßn 'u√¥i'?", a: ["n·∫£i chu·ªëi", "mu·ªói"], correct: 0 }, { q: "Ti·∫øng n√†o c√≥ v·∫ßn 'i√™n'?", a: ["ƒë√®n ƒëi·ªán", "con voi"], correct: 0 }, { q: "ƒêi·ªÅn v·∫ßn: 'bu·ªïi s...'", a: ["√°ng", "anh"], correct: 0 }, { q: "Ti·∫øng n√†o c√≥ v·∫ßn 'u√¥ng'?", a: ["qu·∫£ chu√¥ng", "bu·ªìm"], correct: 0 }, { q: "Ti·∫øng n√†o c√≥ v·∫ßn '∆°i'?", a: ["ƒëi ch∆°i", "t∆∞∆°i"], correct: 0 }, { q: "Ti·∫øng n√†o c√≥ v·∫ßn 'i√™p'?", a: ["t·∫•m thi·ªáp", "ti·∫øp"], correct: 0 }, { q: "ƒêi·ªÅn v·∫ßn: 'th... k·∫ª'", a: ["∆∞·ªõc", "∆∞∆°c"], correct: 0 }, { q: "Ti·∫øng n√†o c√≥ v·∫ßn 'oanh'?", a: ["chim oanh", "qu·∫£ chanh"], correct: 0 }, { q: "Ti·∫øng c√≥ v·∫ßn '∆∞∆°u'?", a: ["con h∆∞∆°u", "con m√®o"], correct: 0 }, { q: "T·ª´ n√†o ch·ªâ ƒë·ªì d√πng h·ªçc t·∫≠p?", a: ["b√∫t ch√¨", "b√°nh m√¨"], correct: 0 }, { q: "T·ª´ n√†o ch·ªâ con v·∫≠t?", a: ["c√° tr√™", "c√°i b√†n"], correct: 0 }, { q: "T·ª´ n√†o ch·ªâ m√†u s·∫Øc?", a: ["m√†u ƒë·ªè", "ƒëi b·ªô"], correct: 0 }, { q: "T·ª´ n√†o ch·ªâ c√¢y c·ªëi?", a: ["c√¢y ƒëa", "c√°i ca"], correct: 0 }, { q: "T·ª´ ch·ªâ ng∆∞·ªùi th√¢n?", a: ["√¥ng b√†", "c√°i b√†n"], correct: 0 }, { q: "Vi·∫øt hoa ƒê√öNG:", a: ["M·∫π y√™u b√©.", "m·∫π y√™u b√©."], correct: 0 }, { q: "C√¢u n√†o ƒë√∫ng nghƒ©a?", a: ["B√© qu√©t nh√†.", "Nh√† qu√©t b√©."], correct: 0 }, { q: "Ti·∫øng c√≥ v·∫ßn 'oi'?", a: ["c√°i c√≤i", "c√°i ca"], correct: 0 }, { q: "V·∫ßn 'u√¥c' c√≥ trong t·ª´ n√†o?", a: ["c√°i cu·ªëc", "chu·ªëi"], correct: 0 }, { q: "V·∫ßn '∆∞∆°i' c√≥ trong t·ª´ n√†o?", a: ["t∆∞∆°i c∆∞·ªùi", "t∆∞·ªõi"], correct: 0 }, { q: "ƒêi·ªÅn v·∫ßn: 'm... t√≥c'", a: ["√°i", "ay"], correct: 0 }, { q: "V·∫ßn 'u√¥n' c√≥ trong t·ª´ n√†o?", a: ["bu√¥n l√†ng", "con l∆∞∆°n"], correct: 0 }, { q: "V·∫ßn 'ai' c√≥ trong t·ª´ n√†o?", a: ["g√† m√°i", "m√°y bay"], correct: 0 }, { q: "Ti·∫øng c√≥ v·∫ßn 'i√™u'?", a: ["c√°i di·ªÅu", "ƒë√®n"], correct: 0 }, { q: "Ti·∫øng c√≥ v·∫ßn '∆∞∆°n'?", a: ["con v∆∞·ª£n", "bu√¥n"], correct: 0 }, { q: "Ti·∫øng c√≥ v·∫ßn 'anh'?", a: ["c√†nh c√¢y", "canh"], correct: 0 }, { q: "Ti·∫øng c√≥ v·∫ßn 'ong'?", a: ["con ong", "√¥ng"], correct: 0 }, { q: "ƒêi·ªÅn v·∫ßn: 'qu·∫£ l...'", a: ["·ª±u", "·ª±"], correct: 0 }, { q: "Ti·∫øng c√≥ √¢m 'th'?", a: ["con th·ªè", "c√°i r·ªï"], correct: 0 }, { q: "Ti·∫øng c√≥ √¢m 'ph'?", a: ["ph·ªë x√°", "ƒëi b·ªô"], correct: 0 }, { q: "V·∫ßn 'ia' c√≥ trong t·ª´ n√†o?", a: ["v·ªâa h√®", "v·ªâ thu·ªëc"], correct: 0 }, { q: "T·ª´ n√†o ch·ªâ lo√†i hoa?", a: ["hoa lan", "lan can"], correct: 0 }, { q: "ƒêi·ªÅn v·∫ßn: 'th∆∞·ªõc k...'", a: ["·∫ª", "·∫Ω"], correct: 0 }, { q: "C√¢u vi·∫øt hoa ƒë√∫ng?", a: ["H√† ƒëi h·ªçc.", "h√† ƒëi h·ªçc."], correct: 0 }, { q: "V·∫ßn 'u√¥i' c√≥ trong t·ª´ n√†o?", a: ["n·∫£i chu·ªëi", "cu·ªëc"], correct: 0 }, { text: "B√© th√≠ch ƒÉn nho v√† d∆∞a h·∫•u.", q: "B√© th√≠ch ƒÉn g√¨?", a: ["Nho, d∆∞a h·∫•u", "B√°nh m√¨"], correct: 0 }, { text: "Con m√®o n·∫±m s∆∞·ªüi n·∫Øng ·ªü s√¢n.", q: "Con m√®o n·∫±m ·ªü ƒë√¢u?", a: ["·ªû s√¢n", "·ªû b·∫øp"], correct: 0 }, { q: "Ti·∫øng n√†o c√≥ v·∫ßn 'u√¥ng'?", a: ["rau mu·ªëng", "m∆∞∆°ng"], correct: 0 }, { q: "V·∫ßn 'anh' c√≥ trong t·ª´ n√†o?", a: ["b√°nh ch∆∞ng", "b√≥ng"], correct: 0 }, { q: "T·ª´ n√†o ƒë√∫ng ch√≠nh t·∫£?", a: ["ngh·ªâ ng∆°i", "ng·ªâ ng∆°i"], correct: 0 }, { q: "C√¢u vi·∫øt ƒë√∫ng:", a: ["B√© ƒëi h·ªçc.", "B√© ƒëi H·ªçc."], correct: 0 } ];

let currentQuiz = [], currentIdx = 0, userAnswers = [], randomizedQuestions = [];

function startQuiz(part) {
    const originalData = (part === 1) ? part1 : (part === 2) ? part2 : part3;
    
    // T·∫°o b·∫£n sao v√† tr·ªôn ƒë√°p √°n cho t·ª´ng c√¢u
    randomizedQuestions = originalData.map(item => {
        let options = [...item.a];
        let correctText = item.a[item.correct];
        
        // Tr·ªôn ng·∫´u nhi√™n 2 ƒë√°p √°n
        if (Math.random() > 0.5) {
            options.reverse();
        }
        
        return {
            ...item,
            shuffledA: options,
            newCorrect: options.indexOf(correctText)
        };
    });

    userAnswers = new Array(randomizedQuestions.length).fill(null);
    currentIdx = 0;
    document.getElementById('menu-screen').style.display = 'none';
    document.getElementById('quiz-content').style.display = 'block';
    document.getElementById('score-board').style.display = 'none';
    document.getElementById('home-button').style.display = 'flex';
    loadQuestion();
}

function goHome() {
    document.getElementById('menu-screen').style.display = 'block';
    document.getElementById('quiz-content').style.display = 'none';
    document.getElementById('score-board').style.display = 'none';
    document.getElementById('home-button').style.display = 'none';
}

function loadQuestion() {
    const data = randomizedQuestions[currentIdx];
    document.getElementById('progress').innerText = `C√¢u ${currentIdx + 1} / ${randomizedQuestions.length}`;
    
    const readEl = document.getElementById('reading-container');
    if(data.text) { readEl.innerText = data.text; readEl.style.display = 'block'; }
    else { readEl.style.display = 'none'; }
    
    document.getElementById('question').innerText = data.q;
    const optEl = document.getElementById('options');
    optEl.innerHTML = '';
    document.getElementById('result-message').innerText = '';

    data.shuffledA.forEach((opt, i) => {
        const btn = document.createElement('button');
        btn.innerText = opt;
        btn.classList.add('option-btn');
        
        if(userAnswers[currentIdx] !== null) {
            if(i === data.newCorrect) btn.classList.add('correct');
            else if(i === userAnswers[currentIdx]) btn.classList.add('wrong');
        }

        btn.onclick = () => {
            if(userAnswers[currentIdx] !== null) return;
            userAnswers[currentIdx] = i;
            
            if(i === data.newCorrect) {
                btn.classList.add('correct');
                document.getElementById('result-message').innerText = "ƒê√∫ng r·ªìi! ‚ú®";
                document.getElementById('result-message').style.color = "green";
                //setTimeout(() => nextQuestion(), 1200);
            } else {
                btn.classList.add('wrong');
                optEl.getElementsByTagName('button')[data.newCorrect].classList.add('correct');
                document.getElementById('result-message').innerText = "B√© ƒë·ªçc k·ªπ l·∫°i nh√©! ‚ù§Ô∏è";
                document.getElementById('result-message').style.color = "red";
            }
        };
        optEl.appendChild(btn);
    });

    document.getElementById('prev-btn').disabled = (currentIdx === 0);
    document.getElementById('next-btn').innerText = (currentIdx === randomizedQuestions.length - 1) ? "K·∫øt qu·∫£ üèÅ" : "Ti·∫øp theo ‚û°";
}

function nextQuestion() {
    if(currentIdx < randomizedQuestions.length - 1) {
        currentIdx++;
        loadQuestion();
    } else {
        showScore();
    }
}

function prevQuestion() {
    if(currentIdx > 0) {
        currentIdx--;
        loadQuestion();
    }
}

function showScore() {
    let correctCount = userAnswers.filter((ans, idx) => ans === randomizedQuestions[idx].newCorrect).length;
    document.getElementById('quiz-content').style.display = 'none';
    document.getElementById('score-board').style.display = 'block';
    document.getElementById('final-score').innerText = `${correctCount} / ${randomizedQuestions.length}`;
    const fb = document.getElementById('feedback-text');
    if(correctCount === randomizedQuestions.length) fb.innerText = "Tuy·ªát v·ªùi! B√© l√† qu√°n qu√¢n ƒëi·ªÉm 10! üèÜ";
    else if(correctCount >= randomizedQuestions.length * 0.8) fb.innerText = "R·∫•t t·ªët! B√© ch·ªâ c·∫ßn c·∫©n th·∫≠n h∆°n ch√∫t th√¥i! üåü";
    else fb.innerText = "B√© h√£y luy·ªán ƒë·ªçc th√™m ƒë·ªÉ ch·ªçn ƒë√∫ng h∆°n nh√©! ‚ù§Ô∏è";
}
</script>
</body>
</html>